%% dont re-indent this file
\begin{lstlisting}[style=scalaioScala]
if N.typep(x) {
  if I.typep(x) {
    if (!STop).typep(x)
      Some(1)
    else if STop.typep(x)
      Some(2)
    else None
  } else {
    if (!SEmpty).typep(x)
      Some(1)
    else if SEmpty.typep(x)
      Some(2)
    else None
  }
} else Some(3)
\end{lstlisting}
